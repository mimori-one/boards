import{f as I,r,o as _,c as p,a as l,g,v as L,u as c,i as z,F as S,h as V,j as k,d as E,k as A,t as x}from"./entry.d0eae973.js";const X={class:"m-4 w-full flex"},Z={class:"w-1/2 space-y-2"},G=["value"],H={key:0},J={class:"flex items-center"},K=l("div",{class:"mr-2"},"X(左からの横位置)",-1),O=l("div",{class:"ml-2"},"mm",-1),P={class:"flex items-center"},Q=l("div",{class:"mr-2"},"Y(下からの縦位置)",-1),W=l("div",{class:"ml-2"},"mm",-1),ee={class:"m-4"},te={class:"flex items-center space-x-2"},le={class:"text-lg"},se={class:"text-xl"},ne={class:"flex w-full"},ie=l("div",null,[l("canvas",{width:"1300",height:"650"}," キャンバスの表示内容を説明する代替テキストです。 ")],-1),oe={class:"flex flex-col space-y-2"},ae=l("div",null,"キズ位置",-1),ce={class:"flex flex-col space-y-2"},ue={class:"flex items-center"},de={class:"w-32"},re=["onClick"],ve={class:"m-4"},xe=l("div",{class:"text-lg"},"切り出し位置",-1),he={class:"flex flex-col space-y-2 m-2"},fe={class:"flex items-center"},ye={class:"text-lg font-bold"},B=10,d=7,h=4,C=3,me=I({__name:"input",setup(_e){const R=[{x:185,y:131},{x:483,y:336},{x:503,y:400},{x:596,y:45},{x:640,y:197},{x:737,y:313},{x:794,y:518},{x:842,y:301},{x:926,y:390},{x:926,y:494},{x:964,y:502},{x:1085,y:527},{x:1232,y:123}],F=[{label:"B6(デフォルト) 182x128",x:182,y:128},{label:"A5 210x148",x:210,y:148},{label:"カスタム",x:0,y:0}],m=r(F[0]),f=r([]),n=r({width:182,height:128});r([{}]);const y=r([{}]),w=r(0),b=r(0),U=r(0),M=()=>{n.value={width:m.value.x,height:m.value.y}},Y=()=>{R.forEach(o=>{f.value.push({f_x:o.x,f_y:o.y}),T()})},q=()=>{f.value.push({f_x:w.value,f_y:b.value}),T()},N=o=>{f.value.splice(o,1),T()},T=()=>{const e=document.querySelector("canvas").getContext("2d");e.fillStyle="paleturquoise",e.fillRect(0,0,1200,610),e.fillStyle="silver",e.fillRect(1200,0,50,610),f.value.forEach(t=>{const a=t.f_x-h,i=610-t.f_y-h;e.fillStyle="deeppink",e.fillRect(a,i,h*2,h*2)})},j=()=>{const e=document.querySelector("canvas").getContext("2d");y.value.forEach(t=>{const a=t.dir==="horizontal"?n.value.width:n.value.height,i=t.dir==="horizontal"?n.value.height:n.value.width,v=t.x,u=610-t.y-i;e.fillStyle="darkslategray",e.fillRect(v,u,a,i),e.font="20px serif",e.fillStyle="white",e.fillText(`${a>i?"ヨコ":"タテ"}`,v+2,u+24),e.fillText(`x: ${t.x}`,v+4,u+50),e.fillText(`y: ${t.y}`,v+4,u+70)})},s=r({x:10,y:10}),D=o=>{const e=performance.now();s.value={x:10,y:10},y.value.splice(0);let t=0;for(;s.value.x+n.value.height<1250&&s.value.y+n.value.height<610&&t<100;)if($(s.value.x,s.value.y,n.value.height,n.value.width)){y.value.push({x:s.value.x,y:s.value.y,dir:"vertical"});let v=s.value.y+n.value.width+d;if(v+n.value.height>600){s.value={x:s.value.x+C,y:B};continue}else{s.value={x:s.value.x,y:v};continue}}else if($(s.value.x,s.value.y,n.value.width,n.value.height)){y.value.push({x:s.value.x,y:s.value.y,dir:"horizontal"});let u=s.value.y+n.value.height+d;if(u+n.value.height>600){s.value={x:s.value.x+C,y:B};continue}else{s.value={x:s.value.x,y:u};continue}}else{let u=s.value.y+C;if(u+n.value.height>600){s.value={x:s.value.x+C,y:B};continue}else{s.value={x:s.value.x,y:u};continue}}const a=performance.now();U.value=a-e,j()},$=(o,e,t,a)=>!(e+a>600||o+t>1197||f.value.some(i=>e-h<i.f_y&&e+a+h>i.f_y&&o-h<i.f_x&&o+t+h>i.f_x)||y.value.some(i=>i.dir==="horizontal"?e<i.y+n.value.height+d&&e+a>i.y-d&&o<i.x+n.value.width+d&&o+t>i.x-d:e<i.y+n.value.width+d&&e+a>i.y-d&&o<i.x+n.value.height+d&&o+n.value.width>i.x-d));return(o,e)=>(_(),p(S,null,[l("div",X,[l("div",Z,[g(l("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>z(m)?m.value=t:null),onChange:M,class:"select select-bordered"},[(_(),p(S,null,V(F,t=>l("option",{value:t},x(t.label),9,G)),64))],544),[[L,c(m)]]),c(m).label==="カスタム"?(_(),p("div",H,[g(l("input",{type:"number",placeholder:"タテ",class:"input input-bordered w-24","onUpdate:modelValue":e[1]||(e[1]=t=>c(n).width=t)},null,512),[[k,c(n).width]]),E(" mm x "),g(l("input",{type:"number",placeholder:"ヨコ",class:"input input-bordered w-24","onUpdate:modelValue":e[2]||(e[2]=t=>c(n).height=t)},null,512),[[k,c(n).height]]),E(" mm ※長い方の数値を左に入れる ")])):A("",!0),l("div",J,[K,g(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>z(w)?w.value=t:null),type:"number",placeholder:"Type here",class:"input input-bordered w-full max-w-xs"},null,512),[[k,c(w)]]),O]),l("div",P,[Q,g(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>z(b)?b.value=t:null),type:"number",placeholder:"Type here",class:"input input-bordered w-full max-w-xs"},null,512),[[k,c(b)]]),W]),l("div",{class:"flex justify-between space-x-4 w-full"},[l("button",{class:"btn btn-primary",onClick:q},"キズ位置を追加"),l("button",{class:"btn",onClick:Y},"sample")])])]),l("div",ee,[l("div",te,[l("button",{onClick:e[5]||(e[5]=t=>D()),class:"btn btn-primary"},"切り出し位置を計算"),l("div",le,"計算時間: "+x(c(U)/1e3)+"秒",1),l("div",se,"枚数: "+x(c(y).length)+"枚",1)]),l("div",ne,[ie,l("div",oe,[ae,l("div",{onClick:e[6]||(e[6]=t=>c(f).splice(0)),class:"btn btn-secondary"},"キズ位置を全てリセット"),l("div",ce,[(_(!0),p(S,null,V(c(f),(t,a)=>(_(),p("div",ue,[l("div",de,x(t.f_x)+", "+x(t.f_y),1),l("button",{onClick:i=>N(a),class:"btn"},"消す",8,re)]))),256))])])])]),l("div",ve,[xe,l("div",he,[(_(!0),p(S,null,V(c(y),t=>(_(),p("div",fe,[l("div",ye,x(t.dir==="vertical"?"タテ":"ヨコ")+" x: "+x(t.x)+", y:"+x(t.y),1)]))),256))])])],64))}});export{me as default};
