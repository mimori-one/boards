import{q as O,s as T,u as m,r as g,x as b,y as _,z as A}from"./entry.c7283a84.js";function D(e){return O()?(T(e),!0):!1}function E(){const e=new Set,a=l=>{e.delete(l)};return{on:l=>{e.add(l);const t=()=>a(l);return D(t),{off:t}},off:a,trigger:l=>Promise.all(Array.from(e).map(t=>l?t(l):t()))}}function h(e){return typeof e=="function"?e():m(e)}const v=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const S=Object.prototype.toString,j=e=>S.call(e)==="[object Object]",k=()=>{},L=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);function C(e){var a;const o=h(e);return(a=o==null?void 0:o.$el)!=null?a:o}const F=v?window:void 0,W=v?window.document:void 0;function y(...e){let a,o,c,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,c,l]=e,a=F):[a,o,c,l]=e,!a)return k;Array.isArray(o)||(o=[o]),Array.isArray(c)||(c=[c]);const t=[],s=()=>{t.forEach(u=>u()),t.length=0},f=(u,i,p,d)=>(u.addEventListener(i,p,d),()=>u.removeEventListener(i,p,d)),n=A(()=>[C(a),h(l)],([u,i])=>{if(s(),!u)return;const p=j(i)?{...i}:i;t.push(...o.flatMap(d=>c.map(w=>f(u,d,w,p))))},{immediate:!0,flush:"post"}),r=()=>{n(),s()};return D(r),r}function G(e,a={}){const o=g(!1),c=b(null);let l=0,t=!0;if(v){const s=typeof a=="function"?{onDrop:a}:a,f=n=>{var r,u;const i=Array.from((u=(r=n.dataTransfer)==null?void 0:r.files)!=null?u:[]);return c.value=i.length===0?null:i};y(e,"dragenter",n=>{var r;if(s.dataTypes&&n.dataTransfer){const u=m(s.dataTypes);if(t=typeof u=="function"?u(n.dataTransfer.types):u?u.some(i=>n.dataTransfer.types.includes(i)):!0,!t)return}n.preventDefault(),l+=1,o.value=!0,(r=s.onEnter)==null||r.call(s,f(n),n)}),y(e,"dragover",n=>{var r;t&&(n.preventDefault(),(r=s.onOver)==null||r.call(s,f(n),n))}),y(e,"dragleave",n=>{var r;t&&(n.preventDefault(),l-=1,l===0&&(o.value=!1),(r=s.onLeave)==null||r.call(s,f(n),n))}),y(e,"drop",n=>{var r;n.preventDefault(),l=0,o.value=!1,(r=s.onDrop)==null||r.call(s,f(n),n)})}return{files:c,isOverDropZone:o}}const P={multiple:!0,accept:"*",reset:!1,directory:!1};function I(e={}){const{document:a=W}=e,o=g(null),{on:c,trigger:l}=E();let t;a&&(t=a.createElement("input"),t.type="file",t.onchange=n=>{const r=n.target;o.value=r.files,l(o.value)});const s=()=>{o.value=null,t&&(t.value="")},f=n=>{if(!t)return;const r={...P,...e,...n};t.multiple=r.multiple,t.accept=r.accept,t.webkitdirectory=r.directory,L(r,"capture")&&(t.capture=r.capture),r.reset&&s(),t.click()};return{files:_(o),open:f,reset:s,onChange:c}}export{G as a,I as u};
